server {
    listen 80;
    listen [::]:80;
    proxy_request_buffering off;
    proxy_max_temp_file_size 10240;
    client_max_body_size 50m;
    send_timeout 60s;
    root  /var/www/html;

    # Phpmyadmin Configurations
    location /phpmyadmin {
        index index.php index.html index.htm;
    }

    # Dealing with the uppercased letters
    location /phpMyAdmin {
        rewrite ^/* /phpmyadmin last;
    }

    location / {
        index index.php index.html index.htm;
    }

    location /asnan {
        root  /var/www/html/payroll/websites;
        index index.php index.html index.htm;
    }

    location /cusmo {
        root  /var/www/html/payroll/websites;
        index index.php index.html index.htm;
    }

    location /course {
        root  /var/www/html/course_dashboard/websites;
        index index.php index.html index.htm;
    }

    location /course_site {
        root  /var/www/html/courses/websites;
        index index.php index.html index.htm;
    }

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;

        # Nginx php-fpm sock config:
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
        # Nginx php-cgi config :
        # Nginx PHP fastcgi_pass 127.0.0.1:9000;
    }

    # deny access to Apache .htaccess on Nginx with PHP,
    # if Apache and Nginx document roots concur
    location ~ /\.ht {
        deny all;
    }

    location /rest{
        proxy_pass http://127.0.0.1:8080;
        proxy_http_version 1.1; # Important, do not omit
    }

    location /rest_cusmo{
        proxy_pass http://127.0.0.1:3030;
        proxy_http_version 1.1; # Important, do not omit
    }

    location /rest_course{
        limit_rate 50k;
        limit_rate_after 500k;
        proxy_pass http://127.0.0.1:2020;
        proxy_http_version 1.1; # Important, do not omit
    }

    location /upload{
        client_body_timeout 120s;
        proxy_buffer_size 128k;
        proxy_buffers 4 256k;
        proxy_busy_buffers_size 256k;
        proxy_pass http://127.0.0.1:2020;
        proxy_http_version 1.1; # Important, do not omit
    }
}
